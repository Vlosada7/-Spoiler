{"version":3,"sources":["../../src/utils/array.ts","../../src/utils/browser.ts","../../src/utils/color/predicates.ts","../../src/utils/color/cssColorUtils.ts","../../../../node_modules/js-cookie/dist/js.cookie.mjs","../../src/utils/cookies.ts","../../src/utils/date.ts","../../src/utils/file.ts","../../src/utils/isomorphicAtob.ts","../../src/utils/keys.ts","../../src/utils/isRetinaDisplay.ts","../../src/utils/localStorageBroadcastChannel.ts","../../src/utils/mimeTypeExtensions.ts","../../src/utils/noop.ts","../../src/utils/string.ts","../../src/utils/object.ts","../../src/utils/workerTimers/createWorkerTimers.ts","../../src/utils/poller.ts","../../src/utils/proxy.ts","../../src/utils/ssr.ts","../../src/utils/url.ts","../../src/utils/runWithExponentialBackOff.ts","../../src/utils/createDeferredPromise.ts"],"sourcesContent":["export const toSentence = (items: string[]): string => {\n  // TODO: Once Safari supports it, use Intl.ListFormat\n  if (items.length == 0) {\n    return '';\n  }\n  if (items.length == 1) {\n    return items[0];\n  }\n  let sentence = items.slice(0, -1).join(', ');\n  sentence += `, or ${items.slice(-1)}`;\n  return sentence;\n};\n","export function inBrowser(): boolean {\n  return typeof window !== 'undefined';\n}\n\nexport function detectUserAgentRobot(userAgent: string): boolean {\n  const robots = new RegExp(\n    (\n      [\n        /bot/,\n        /spider/,\n        /crawl/,\n        /APIs-Google/,\n        /AdsBot/,\n        /Googlebot/,\n        /mediapartners/,\n        /Google Favicon/,\n        /FeedFetcher/,\n        /Google-Read-Aloud/,\n        /DuplexWeb-Google/,\n        /googleweblight/,\n        /bing/,\n        /yandex/,\n        /baidu/,\n        /duckduck/,\n        /yahoo/,\n        /ecosia/,\n        /ia_archiver/,\n        /facebook/,\n        /instagram/,\n        /pinterest/,\n        /reddit/,\n        /slack/,\n        /twitter/,\n        /whatsapp/,\n        /youtube/,\n        /semrush/,\n      ] as RegExp[]\n    )\n      .map(r => r.source)\n      .join('|'),\n    'i',\n  );\n\n  return robots.test(userAgent);\n}\n\nexport function isValidBrowserOnline(): boolean {\n  const navigator = window?.navigator;\n  if (!inBrowser() || !navigator) {\n    return false;\n  }\n\n  const isUserAgentRobot = detectUserAgentRobot(navigator?.userAgent);\n  const isWebDriver = navigator?.webdriver;\n  const isNavigatorOnline = navigator?.onLine;\n\n  // Being extra safe with the experimental `connection` property, as it is not defined in all browsers\n  // https://developer.mozilla.org/en-US/docs/Web/API/Navigator/connection#browser_compatibility\n  // @ts-ignore\n  const isExperimentalConnectionOnline = navigator?.connection?.rtt !== 0 && navigator?.connection?.downlink !== 0;\n\n  return !isUserAgentRobot && !isWebDriver && isExperimentalConnectionOnline && isNavigatorOnline;\n}\n","import type { Color, HslaColor, RgbaColor, TransparentColor } from '@clerk/types';\n\nconst IS_HEX_COLOR_REGEX = /^#?([A-F0-9]{6}|[A-F0-9]{3})$/i;\n\nconst IS_RGB_COLOR_REGEX = /^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)$/i;\nconst IS_RGBA_COLOR_REGEX = /^rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+)(,\\s*\\d+(\\.\\d+)?)\\)$/i;\n\nconst IS_HSL_COLOR_REGEX = /^hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)$/i;\nconst IS_HSLA_COLOR_REGEX = /^hsla\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%(,\\s*\\d+(\\.\\d+)?)*\\)$/i;\n\nexport const isValidHexString = (s: string) => {\n  return !!s.match(IS_HEX_COLOR_REGEX);\n};\n\nexport const isValidRgbaString = (s: string) => {\n  return !!(s.match(IS_RGB_COLOR_REGEX) || s.match(IS_RGBA_COLOR_REGEX));\n};\n\nexport const isValidHslaString = (s: string) => {\n  return !!s.match(IS_HSL_COLOR_REGEX) || !!s.match(IS_HSLA_COLOR_REGEX);\n};\n\nexport const isRGBColor = (c: Color): c is RgbaColor => {\n  return typeof c !== 'string' && 'r' in c;\n};\n\nexport const isHSLColor = (c: Color): c is HslaColor => {\n  return typeof c !== 'string' && 'h' in c;\n};\n\nexport const isTransparent = (c: Color): c is TransparentColor => {\n  return c === 'transparent';\n};\n\nexport const hasAlpha = (color: Color): boolean => {\n  return typeof color !== 'string' && color.a != undefined && color.a < 1;\n};\n","import type { Color, HslaColor, RgbaColor, TransparentColor } from '@clerk/types';\n\nimport {\n  isHSLColor,\n  isRGBColor,\n  isTransparent,\n  isValidHexString,\n  isValidHslaString,\n  isValidRgbaString,\n} from './predicates';\n\nconst CLEAN_HSLA_REGEX = /[hsla()]/g;\nconst CLEAN_RGBA_REGEX = /[rgba()]/g;\n\nexport const stringToHslaColor = (value: string): HslaColor | null => {\n  if (value === 'transparent') {\n    return { h: 0, s: 0, l: 0, a: 0 };\n  }\n\n  if (isValidHexString(value)) {\n    return hexStringToHslaColor(value);\n  }\n\n  if (isValidHslaString(value)) {\n    return parseHslaString(value);\n  }\n\n  if (isValidRgbaString(value)) {\n    return rgbaStringToHslaColor(value);\n  }\n\n  return null;\n};\n\nexport const stringToSameTypeColor = (value: string): Color => {\n  value = value.trim();\n  if (isValidHexString(value)) {\n    return value.startsWith('#') ? value : `#${value}`;\n  }\n\n  if (isValidRgbaString(value)) {\n    return parseRgbaString(value);\n  }\n\n  if (isValidHslaString(value)) {\n    return parseHslaString(value);\n  }\n\n  if (isTransparent(value)) {\n    return value;\n  }\n  return '';\n};\n\nexport const colorToSameTypeString = (color: Color): string | TransparentColor => {\n  if (typeof color === 'string' && (isValidHexString(color) || isTransparent(color))) {\n    return color;\n  }\n\n  if (isRGBColor(color)) {\n    return rgbaColorToRgbaString(color);\n  }\n\n  if (isHSLColor(color)) {\n    return hslaColorToHslaString(color);\n  }\n\n  return '';\n};\n\nexport const hexStringToRgbaColor = (hex: string): RgbaColor => {\n  hex = hex.replace('#', '');\n  const r = parseInt(hex.substring(0, 2), 16);\n  const g = parseInt(hex.substring(2, 4), 16);\n  const b = parseInt(hex.substring(4, 6), 16);\n  return { r, g, b };\n};\n\nconst rgbaColorToRgbaString = (color: RgbaColor): string => {\n  const { a, b, g, r } = color;\n  return color.a === 0 ? 'transparent' : color.a != undefined ? `rgba(${r},${g},${b},${a})` : `rgb(${r},${g},${b})`;\n};\n\nconst hslaColorToHslaString = (color: HslaColor): string => {\n  const { h, s, l, a } = color;\n  const sPerc = Math.round(s * 100);\n  const lPerc = Math.round(l * 100);\n  return color.a === 0\n    ? 'transparent'\n    : color.a != undefined\n    ? `hsla(${h},${sPerc}%,${lPerc}%,${a})`\n    : `hsl(${h},${sPerc}%,${lPerc}%)`;\n};\n\nconst hexStringToHslaColor = (hex: string): HslaColor => {\n  const rgbaString = colorToSameTypeString(hexStringToRgbaColor(hex));\n  return rgbaStringToHslaColor(rgbaString);\n};\n\nconst rgbaStringToHslaColor = (rgba: string): HslaColor => {\n  const rgbaColor = parseRgbaString(rgba);\n  const r = rgbaColor.r / 255;\n  const g = rgbaColor.g / 255;\n  const b = rgbaColor.b / 255;\n\n  const max = Math.max(r, g, b),\n    min = Math.min(r, g, b);\n  let h, s;\n  const l = (max + min) / 2;\n\n  if (max == min) {\n    h = s = 0;\n  } else {\n    const d = max - min;\n    s = l >= 0.5 ? d / (2 - (max + min)) : d / (max + min);\n    switch (max) {\n      case r:\n        h = ((g - b) / d) * 60;\n        break;\n      case g:\n        h = ((b - r) / d + 2) * 60;\n        break;\n      default:\n        h = ((r - g) / d + 4) * 60;\n        break;\n    }\n  }\n\n  const res: HslaColor = { h: Math.round(h), s, l };\n  const a = rgbaColor.a;\n  if (a != undefined) {\n    res.a = a;\n  }\n  return res;\n};\n\nconst parseRgbaString = (str: string): RgbaColor => {\n  const [r, g, b, a] = str\n    .replace(CLEAN_RGBA_REGEX, '')\n    .split(',')\n    .map(c => Number.parseFloat(c));\n  return { r, g, b, a };\n};\n\nconst parseHslaString = (str: string): HslaColor => {\n  const [h, s, l, a] = str\n    .replace(CLEAN_HSLA_REGEX, '')\n    .split(',')\n    .map(c => Number.parseFloat(c));\n  return { h, s: s / 100, l: l / 100, a };\n};\n","/*! js-cookie v3.0.1 | MIT */\n/* eslint-disable no-var */\nfunction assign (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target\n}\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\nvar defaultConverter = {\n  read: function (value) {\n    if (value[0] === '\"') {\n      value = value.slice(1, -1);\n    }\n    return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n  },\n  write: function (value) {\n    return encodeURIComponent(value).replace(\n      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n      decodeURIComponent\n    )\n  }\n};\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\n\nfunction init (converter, defaultAttributes) {\n  function set (key, value, attributes) {\n    if (typeof document === 'undefined') {\n      return\n    }\n\n    attributes = assign({}, defaultAttributes, attributes);\n\n    if (typeof attributes.expires === 'number') {\n      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n    }\n    if (attributes.expires) {\n      attributes.expires = attributes.expires.toUTCString();\n    }\n\n    key = encodeURIComponent(key)\n      .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n      .replace(/[()]/g, escape);\n\n    var stringifiedAttributes = '';\n    for (var attributeName in attributes) {\n      if (!attributes[attributeName]) {\n        continue\n      }\n\n      stringifiedAttributes += '; ' + attributeName;\n\n      if (attributes[attributeName] === true) {\n        continue\n      }\n\n      // Considers RFC 6265 section 5.2:\n      // ...\n      // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n      //     character:\n      // Consume the characters of the unparsed-attributes up to,\n      // not including, the first %x3B (\";\") character.\n      // ...\n      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n    }\n\n    return (document.cookie =\n      key + '=' + converter.write(value, key) + stringifiedAttributes)\n  }\n\n  function get (key) {\n    if (typeof document === 'undefined' || (arguments.length && !key)) {\n      return\n    }\n\n    // To prevent the for loop in the first place assign an empty array\n    // in case there are no cookies at all.\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\n    var jar = {};\n    for (var i = 0; i < cookies.length; i++) {\n      var parts = cookies[i].split('=');\n      var value = parts.slice(1).join('=');\n\n      try {\n        var foundKey = decodeURIComponent(parts[0]);\n        jar[foundKey] = converter.read(value, foundKey);\n\n        if (key === foundKey) {\n          break\n        }\n      } catch (e) {}\n    }\n\n    return key ? jar[key] : jar\n  }\n\n  return Object.create(\n    {\n      set: set,\n      get: get,\n      remove: function (key, attributes) {\n        set(\n          key,\n          '',\n          assign({}, attributes, {\n            expires: -1\n          })\n        );\n      },\n      withAttributes: function (attributes) {\n        return init(this.converter, assign({}, this.attributes, attributes))\n      },\n      withConverter: function (converter) {\n        return init(assign({}, this.converter, converter), this.attributes)\n      }\n    },\n    {\n      attributes: { value: Object.freeze(defaultAttributes) },\n      converter: { value: Object.freeze(converter) }\n    }\n  )\n}\n\nvar api = init(defaultConverter, { path: '/' });\n/* eslint-enable no-var */\n\nexport default api;\n","import Cookies from 'js-cookie';\n\ntype LocationAttributes = {\n  path?: string;\n  domain?: string;\n};\n\nexport function createCookieHandler(cookieName: string) {\n  return {\n    get() {\n      return Cookies.get(cookieName);\n    },\n    /**\n     * Setting a cookie will use some defaults such as path being set to \"/\".\n     */\n    set(newValue: string, options: Cookies.CookieAttributes = {}) {\n      return Cookies.set(cookieName, newValue, options);\n    },\n    /**\n     * On removing a cookie, you have to pass the exact same path/domain attributes used to set it initially\n     * @see https://github.com/js-cookie/js-cookie#basic-usage\n     */\n    remove(locationAttributes?: LocationAttributes) {\n      Cookies.remove(cookieName, locationAttributes);\n    },\n  };\n}\n","const MILLISECONDS_IN_DAY = 86400000;\n\nexport function dateTo12HourTime(date: Date): string {\n  if (!date) {\n    return '';\n  }\n  return date.toLocaleString('en-US', {\n    hour: '2-digit',\n    minute: 'numeric',\n    hour12: true,\n  });\n}\n\nexport function differenceInCalendarDays(a: Date, b: Date, { absolute = true } = {}): number {\n  if (!a || !b) {\n    return 0;\n  }\n  const utcA = Date.UTC(a.getFullYear(), a.getMonth(), a.getDate());\n  const utcB = Date.UTC(b.getFullYear(), b.getMonth(), b.getDate());\n  const diff = Math.floor((utcB - utcA) / MILLISECONDS_IN_DAY);\n  return absolute ? Math.abs(diff) : diff;\n}\n\nexport function normalizeDate(d: Date | string | number): Date {\n  try {\n    return new Date(d || new Date());\n  } catch (e) {\n    return new Date();\n  }\n}\n\ntype DateFormatRelativeParams = {\n  date: Date | string | number;\n  relativeTo: Date | string | number;\n};\n\ntype RelativeDateCase = 'previous6Days' | 'lastDay' | 'sameDay' | 'nextDay' | 'next6Days' | 'other';\ntype RelativeDateReturn = { relativeDateCase: RelativeDateCase; date: Date } | null;\nexport function formatRelative(props: DateFormatRelativeParams): RelativeDateReturn {\n  const { date, relativeTo } = props;\n  if (!date || !relativeTo) {\n    return null;\n  }\n  const a = normalizeDate(date);\n  const b = normalizeDate(relativeTo);\n  const differenceInDays = differenceInCalendarDays(b, a, { absolute: false });\n\n  if (differenceInDays < -6) {\n    return { relativeDateCase: 'other', date: a };\n  }\n  if (differenceInDays < -1) {\n    return { relativeDateCase: 'previous6Days', date: a };\n  }\n  if (differenceInDays === -1) {\n    return { relativeDateCase: 'lastDay', date: a };\n  }\n  if (differenceInDays === 0) {\n    return { relativeDateCase: 'sameDay', date: a };\n  }\n  if (differenceInDays === 1) {\n    return { relativeDateCase: 'nextDay', date: a };\n  }\n  if (differenceInDays < 7) {\n    return { relativeDateCase: 'next6Days', date: a };\n  }\n  return { relativeDateCase: 'other', date: a };\n}\n\nexport function addYears(initialDate: Date | number | string, yearsToAdd: number): Date {\n  const date = normalizeDate(initialDate);\n  date.setFullYear(date.getFullYear() + yearsToAdd);\n  return date;\n}\n","/**\n * Read an expected JSON type File.\n *\n * Probably paired with:\n *  <input type='file' accept='application/JSON' ... />\n */\nexport function readJSONFile(file: File): Promise<unknown> {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.addEventListener('load', function () {\n      const result = JSON.parse(reader.result as string);\n      resolve(result);\n    });\n\n    reader.addEventListener('error', reject);\n    reader.readAsText(file);\n  });\n}\n","export const isomorphicAtob = (data: string) => {\n  if (typeof atob !== 'undefined' && typeof atob === 'function') {\n    return atob(data);\n  } else if (typeof Buffer !== 'undefined') {\n    return new Buffer(data, 'base64').toString();\n  }\n  return data;\n};\n","import type { PublishableKey } from '@clerk/types';\n\nimport { isomorphicAtob } from './isomorphicAtob';\n\nconst PUBLISHABLE_KEY_LIVE_PREFIX = 'pk_live_';\nconst PUBLISHABLE_KEY_TEST_PREFIX = 'pk_test_';\n\n// This regex matches the publishable like frontend API keys (e.g. foo-bar-13.clerk.accounts.dev)\nconst PUBLISHABLE_FRONTEND_API_DEV_REGEX = /^(([a-z]+)-){2}([0-9]{1,2})\\.clerk\\.accounts([a-z.]*)(dev|com)$/i;\n\nexport function buildPublishableKey(frontendApi: string): string {\n  const keyPrefix = PUBLISHABLE_FRONTEND_API_DEV_REGEX.test(frontendApi)\n    ? PUBLISHABLE_KEY_TEST_PREFIX\n    : PUBLISHABLE_KEY_LIVE_PREFIX;\n  return `${keyPrefix}${btoa(`${frontendApi}$`)}`;\n}\n\nexport function parsePublishableKey(key: string | undefined): PublishableKey | null {\n  key = key || '';\n\n  if (!isPublishableKey(key)) {\n    return null;\n  }\n\n  const instanceType = key.startsWith(PUBLISHABLE_KEY_LIVE_PREFIX) ? 'production' : 'development';\n\n  let frontendApi = isomorphicAtob(key.split('_')[2]);\n\n  if (!frontendApi.endsWith('$')) {\n    return null;\n  }\n\n  frontendApi = frontendApi.slice(0, -1);\n\n  return {\n    instanceType,\n    frontendApi,\n  };\n}\n\nexport function isPublishableKey(key: string) {\n  key = key || '';\n\n  const hasValidPrefix = key.startsWith(PUBLISHABLE_KEY_LIVE_PREFIX) || key.startsWith(PUBLISHABLE_KEY_TEST_PREFIX);\n\n  const hasValidFrontendApiPostfix = isomorphicAtob(key.split('_')[2] || '').endsWith('$');\n\n  return hasValidPrefix && hasValidFrontendApiPostfix;\n}\n\nexport function isLegacyFrontendApiKey(key: string) {\n  key = key || '';\n\n  return key.startsWith('clerk.');\n}\n","export function isRetinaDisplay(): boolean {\n  if (!window.matchMedia) {\n    return false;\n  }\n  const mq = window.matchMedia(\n    'only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen  and (min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx)',\n  );\n  return (mq && mq.matches) || window.devicePixelRatio > 1;\n}\n","type Listener<T> = (e: MessageEvent<T>) => void;\n\nconst KEY_PREFIX = '__lsbc__';\n\nexport class LocalStorageBroadcastChannel<E> {\n  private readonly eventTarget = window;\n  private readonly channelKey: string;\n\n  constructor(name: string) {\n    this.channelKey = KEY_PREFIX + name;\n    this.setupLocalStorageListener();\n  }\n\n  public postMessage = (data: E): void => {\n    try {\n      localStorage.setItem(this.channelKey, JSON.stringify(data));\n      localStorage.removeItem(this.channelKey);\n    } catch (e) {\n      //\n    }\n  };\n\n  public addEventListener = (eventName: 'message', listener: Listener<E>): void => {\n    this.eventTarget.addEventListener(this.prefixEventName(eventName), e => {\n      listener(e as MessageEvent);\n    });\n  };\n\n  private setupLocalStorageListener = () => {\n    const notifyListeners = (e: StorageEvent) => {\n      if (e.key !== this.channelKey || !e.newValue) {\n        return;\n      }\n\n      try {\n        const data = JSON.parse(e.newValue || '');\n        const event = new MessageEvent(this.prefixEventName('message'), {\n          data,\n        });\n        this.eventTarget.dispatchEvent(event);\n      } catch (e) {\n        //\n      }\n    };\n\n    window.addEventListener('storage', notifyListeners);\n  };\n\n  private prefixEventName(eventName: string): string {\n    return this.channelKey + eventName;\n  }\n}\n","const MimeTypeToExtensionMap = Object.freeze({\n  'image/png': 'png',\n  'image/jpeg': 'jpg',\n  'image/gif': 'gif',\n  'image/webp': 'webp',\n  'image/x-icon': 'ico',\n  'image/vnd.microsoft.icon': 'ico',\n} as const);\n\nexport type SupportedMimeType = keyof typeof MimeTypeToExtensionMap;\n\nexport const extension = (mimeType: SupportedMimeType): string => {\n  return MimeTypeToExtensionMap[mimeType];\n};\n","/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable @typescript-eslint/no-empty-function */\nexport const noop = (..._args: any[]): void => {};\n","const IP_V4_ADDRESS_REGEX =\n  /^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;\n\nexport function isIPV4Address(str: string | undefined | null): boolean {\n  return IP_V4_ADDRESS_REGEX.test(str || '');\n}\n\nexport function titleize(str: string | undefined | null): string {\n  const s = str || '';\n  return s.charAt(0).toUpperCase() + s.slice(1);\n}\n\nexport function snakeToCamel(str: string | undefined): string {\n  return str ? str.replace(/([-_][a-z])/g, match => match.toUpperCase().replace(/-|_/, '')) : '';\n}\n\nexport function camelToSnake(str: string | undefined): string {\n  return str ? str.replace(/[A-Z]/g, letter => `_${letter.toLowerCase()}`) : '';\n}\n","import { camelToSnake, snakeToCamel } from './string';\n\nconst createDeepObjectTransformer = (transform: any) => {\n  const deepTransform = (obj: any): any => {\n    if (!obj) {\n      return obj;\n    }\n\n    if (Array.isArray(obj)) {\n      return obj.map(el => {\n        if (typeof el === 'object' || Array.isArray(el)) {\n          return deepTransform(el);\n        }\n        return el;\n      });\n    }\n\n    const copy = { ...obj };\n    const keys = Object.keys(copy);\n    for (const oldName of keys) {\n      const newName = transform(oldName.toString());\n      if (newName !== oldName) {\n        copy[newName] = copy[oldName];\n        delete copy[oldName];\n      }\n      if (typeof copy[newName] === 'object') {\n        copy[newName] = deepTransform(copy[newName]);\n      }\n    }\n    return copy;\n  };\n\n  return deepTransform;\n};\n\n/**\n * Transforms camelCased objects/ arrays to snake_cased.\n * This function recursively traverses all objects and arrays of the passed value\n * camelCased keys are removed.\n */\nexport const deepCamelToSnake = createDeepObjectTransformer(camelToSnake);\n\n/**\n * Transforms snake_cased objects/ arrays to camelCased.\n * This function recursively traverses all objects and arrays of the passed value\n * camelCased keys are removed.\n */\nexport const deepSnakeToCamel = createDeepObjectTransformer(snakeToCamel);\n","import { noop } from '../noop';\nimport type {\n  WorkerClearTimeout,\n  WorkerSetTimeout,\n  WorkerTimeoutCallback,\n  WorkerTimerEvent,\n  WorkerTimerId,\n  WorkerTimerResponseEvent,\n} from './workerTimers.types';\n// @ts-ignore\nimport pollerWorkerSource from './workerTimers.worker';\n\nconst createWebWorker = (source: string, opts: ConstructorParameters<typeof Worker>[1] = {}): Worker | null => {\n  if (typeof Worker === 'undefined') {\n    return null;\n  }\n\n  try {\n    const blob = new Blob([source], { type: 'application/javascript; charset=utf-8' });\n    const workerScript = globalThis.URL.createObjectURL(blob);\n    return new Worker(workerScript, opts);\n  } catch (e) {\n    console.warn('Clerk: Cannot create worker from blob. Consider adding worker-src blob:; to your CSP');\n    return null;\n  }\n};\n\nconst fallbackTimers = () => {\n  const setTimeout = globalThis.setTimeout.bind(globalThis) as WorkerSetTimeout;\n  const setInterval = globalThis.setInterval.bind(globalThis) as WorkerSetTimeout;\n  const clearTimeout = globalThis.clearTimeout.bind(globalThis) as WorkerClearTimeout;\n  const clearInterval = globalThis.clearInterval.bind(globalThis) as WorkerClearTimeout;\n  return { setTimeout, setInterval, clearTimeout, clearInterval, cleanup: noop };\n};\n\nexport const createWorkerTimers = () => {\n  let id = 0;\n  const generateId = () => id++;\n  const callbacks = new Map<WorkerTimerId, WorkerTimeoutCallback>();\n  const post = (w: Worker | null, p: WorkerTimerEvent) => w?.postMessage(p);\n  const handleMessage = (e: MessageEvent<WorkerTimerResponseEvent>) => {\n    callbacks.get(e.data.id)?.();\n  };\n\n  let worker = createWebWorker(pollerWorkerSource, { name: 'clerk-timers' });\n  worker?.addEventListener('message', handleMessage);\n\n  if (!worker) {\n    return fallbackTimers();\n  }\n\n  const init = () => {\n    if (!worker) {\n      worker = createWebWorker(pollerWorkerSource, { name: 'clerk-timers' });\n      worker?.addEventListener('message', handleMessage);\n    }\n  };\n\n  const cleanup = () => {\n    if (worker) {\n      worker.terminate();\n      worker = null;\n      callbacks.clear();\n    }\n  };\n\n  const setTimeout: WorkerSetTimeout = (cb, ms) => {\n    init();\n    const id = generateId();\n    callbacks.set(id, cb);\n    post(worker, { type: 'setTimeout', id, ms });\n    return id;\n  };\n\n  const setInterval: WorkerSetTimeout = (cb, ms) => {\n    init();\n    const id = generateId();\n    callbacks.set(id, cb);\n    post(worker, { type: 'setInterval', id, ms });\n    return id;\n  };\n\n  const clearTimeout: WorkerClearTimeout = id => {\n    init();\n    callbacks.delete(id);\n    post(worker, { type: 'clearTimeout', id });\n  };\n\n  const clearInterval: WorkerClearTimeout = id => {\n    init();\n    callbacks.delete(id);\n    post(worker, { type: 'clearInterval', id });\n  };\n\n  return { setTimeout, setInterval, clearTimeout, clearInterval, cleanup };\n};\n","import { createWorkerTimers } from './workerTimers';\n\nexport type PollerStop = () => void;\nexport type PollerCallback = (stop: PollerStop) => Promise<unknown>;\nexport type PollerRun = (cb: PollerCallback) => Promise<void>;\n\ntype PollerOptions = {\n  delayInMs: number;\n};\n\nexport type Poller = {\n  run: PollerRun;\n  stop: PollerStop;\n};\n\nexport function Poller({ delayInMs }: PollerOptions = { delayInMs: 1000 }): Poller {\n  const workerTimers = createWorkerTimers();\n\n  let timerId: number | undefined;\n  let stopped = false;\n\n  const stop: PollerStop = () => {\n    if (timerId) {\n      workerTimers.clearTimeout(timerId);\n      workerTimers.cleanup();\n    }\n    stopped = true;\n  };\n\n  const run: PollerRun = async cb => {\n    stopped = false;\n    await cb(stop);\n    if (stopped) {\n      return;\n    }\n\n    timerId = workerTimers.setTimeout(() => {\n      void run(cb);\n    }, delayInMs) as any as number;\n  };\n\n  return { run, stop };\n}\n","export function isValidProxyUrl(key: string | undefined) {\n  if (!key) {\n    return true;\n  }\n\n  return isHttpOrHttps(key) || isProxyUrlRelative(key);\n}\n\nexport function isHttpOrHttps(key: string | undefined) {\n  return /^http(s)?:\\/\\//.test(key || '');\n}\n\nexport function isProxyUrlRelative(key: string) {\n  return key.startsWith('/');\n}\n\nexport function proxyUrlToAbsoluteURL(url: string | undefined): string {\n  if (!url) {\n    return '';\n  }\n  return isProxyUrlRelative(url) ? new URL(url, window.location.origin).toString() : url;\n}\n","export const inClientSide = (): boolean => {\n  return typeof window !== 'undefined';\n};\n","export function parseSearchParams(queryString = ''): URLSearchParams {\n  if (queryString.startsWith('?')) {\n    queryString = queryString.slice(1);\n  }\n  return new URLSearchParams(queryString);\n}\n\nexport function stripScheme(url = ''): string {\n  return (url || '').replace(/^.+:\\/\\//, '');\n}\n\nexport function addClerkPrefix(str: string | undefined) {\n  if (!str) {\n    return '';\n  }\n  let regex;\n  if (str?.match(/(clerk\\.)+dev$/)) {\n    regex = /(clerk\\.)*(?=clerk\\.)/;\n  } else {\n    regex = /clerk\\./gi;\n  }\n\n  const stripped = str.replace(regex, '');\n  return `clerk.${stripped}`;\n}\n","type Milliseconds = number;\n\ntype BackoffOptions = Partial<{\n  maxRetries: number;\n  firstDelay: Milliseconds;\n  timeMultiple: number;\n  shouldRetry: (error: unknown, iterationsCount: number) => boolean;\n}>;\n\nconst defaultOptions: Required<BackoffOptions> = {\n  maxRetries: 10,\n  firstDelay: 125,\n  timeMultiple: 2,\n  shouldRetry: () => true,\n};\n\nconst sleep = async (ms: Milliseconds) => new Promise(s => setTimeout(s, ms));\n\nconst createExponentialDelayAsyncFn = (opts: { firstDelay: Milliseconds; timeMultiple: number }) => {\n  let timesCalled = 0;\n\n  const calculateDelayInMs = () => {\n    const constant = opts.firstDelay;\n    const base = opts.timeMultiple;\n    return constant * Math.pow(base, timesCalled);\n  };\n\n  return async (): Promise<void> => {\n    await sleep(calculateDelayInMs());\n    timesCalled++;\n  };\n};\n\nexport const runWithExponentialBackOff = async <T>(\n  callback: () => T | Promise<T>,\n  options: BackoffOptions = {},\n): Promise<T> => {\n  let iterationsCount = 0;\n  const { maxRetries, shouldRetry, firstDelay, timeMultiple } = {\n    ...defaultOptions,\n    ...options,\n  };\n  const maxRetriesReached = () => iterationsCount === maxRetries;\n  const delay = createExponentialDelayAsyncFn({ firstDelay, timeMultiple });\n\n  while (!maxRetriesReached()) {\n    try {\n      return await callback();\n    } catch (e) {\n      iterationsCount++;\n      if (!shouldRetry(e, iterationsCount) || maxRetriesReached()) {\n        throw e;\n      }\n      await delay();\n    }\n  }\n\n  // This should be impossible to reach, but it makes TS happy\n  throw new Error('Something went wrong');\n};\n","import { noop } from './noop';\n\ntype Callback = (val?: any) => void;\n\n/**\n * Create a promise that can be resolved or rejected from\n * outside the Promise constructor callback\n */\nexport const createDeferredPromise = () => {\n  let resolve: Callback = noop;\n  let reject: Callback = noop;\n  const promise = new Promise((res, rej) => {\n    resolve = res;\n    reject = rej;\n  });\n  return { promise, resolve, reject };\n};\n"],"mappings":"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","names":["toSentence","items","sentence","inBrowser","detectUserAgentRobot","userAgent","isValidBrowserOnline","navigator","isUserAgentRobot","isWebDriver","isNavigatorOnline","isExperimentalConnectionOnline","IS_HEX_COLOR_REGEX","IS_RGB_COLOR_REGEX","IS_RGBA_COLOR_REGEX","IS_HSL_COLOR_REGEX","IS_HSLA_COLOR_REGEX","isValidHexString","s","isValidRgbaString","isValidHslaString","isRGBColor","c","isHSLColor","isTransparent","hasAlpha","color","CLEAN_HSLA_REGEX","CLEAN_RGBA_REGEX","stringToHslaColor","value","isValidHexString","hexStringToHslaColor","isValidHslaString","parseHslaString","isValidRgbaString","rgbaStringToHslaColor","stringToSameTypeColor","parseRgbaString","isTransparent","colorToSameTypeString","color","isRGBColor","rgbaColorToRgbaString","isHSLColor","hslaColorToHslaString","hexStringToRgbaColor","hex","r","g","b","a","h","s","l","sPerc","lPerc","rgbaString","rgba","rgbaColor","max","min","d","res","str","c","assign","target","i","source","key","defaultConverter","value","init","converter","defaultAttributes","set","attributes","stringifiedAttributes","attributeName","get","cookies","jar","parts","foundKey","api","js_cookie_default","createCookieHandler","cookieName","js_cookie_default","newValue","options","locationAttributes","dateTo12HourTime","date","differenceInCalendarDays","a","b","absolute","utcA","utcB","diff","normalizeDate","d","formatRelative","props","relativeTo","differenceInDays","addYears","initialDate","yearsToAdd","readJSONFile","file","resolve","reject","reader","result","isomorphicAtob","data","PUBLISHABLE_KEY_LIVE_PREFIX","PUBLISHABLE_KEY_TEST_PREFIX","PUBLISHABLE_FRONTEND_API_DEV_REGEX","buildPublishableKey","frontendApi","parsePublishableKey","key","isPublishableKey","instanceType","isomorphicAtob","hasValidPrefix","hasValidFrontendApiPostfix","isLegacyFrontendApiKey","isRetinaDisplay","mq","KEY_PREFIX","LocalStorageBroadcastChannel","name","data","eventName","listener","e","notifyListeners","event","MimeTypeToExtensionMap","extension","mimeType","noop","_args","IP_V4_ADDRESS_REGEX","isIPV4Address","str","titleize","s","snakeToCamel","match","camelToSnake","letter","createDeepObjectTransformer","transform","deepTransform","obj","el","copy","keys","oldName","newName","deepCamelToSnake","camelToSnake","deepSnakeToCamel","snakeToCamel","createWebWorker","source","opts","blob","workerScript","fallbackTimers","setTimeout","setInterval","clearTimeout","clearInterval","noop","createWorkerTimers","id","generateId","callbacks","post","w","p","handleMessage","e","worker","workerTimers_worker_default","init","cb","ms","Poller","delayInMs","workerTimers","createWorkerTimers","timerId","stopped","stop","run","cb","isValidProxyUrl","key","isHttpOrHttps","isProxyUrlRelative","proxyUrlToAbsoluteURL","url","inClientSide","parseSearchParams","queryString","stripScheme","url","addClerkPrefix","str","regex","defaultOptions","sleep","ms","s","createExponentialDelayAsyncFn","opts","timesCalled","calculateDelayInMs","constant","base","runWithExponentialBackOff","callback","options","iterationsCount","maxRetries","shouldRetry","firstDelay","timeMultiple","maxRetriesReached","delay","e","createDeferredPromise","resolve","noop","reject","res","rej"]}